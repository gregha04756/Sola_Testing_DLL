// The following ifdef block is the standard way of creating macros which make exporting 
// from a DLL simpler. All files within this DLL are compiled with the SOLA_TESTING_DLL_EXPORTS
// symbol defined on the command line. This symbol should not be defined on any project
// that uses this DLL. This way any other project whose source files include this file see 
// SOLA_TESTING_DLL_API functions as being imported from a DLL, whereas this DLL sees symbols
// defined with this macro as being exported.
#ifdef SOLA_TESTING_DLL_EXPORTS
#define SOLA_TESTING_DLL_API __declspec(dllexport)
#else
#define SOLA_TESTING_DLL_API __declspec(dllimport)
#endif

using namespace std;

#define WM_APPENDDLGTHREAD WM_APP
#define WM_APPUPDDLGTEXT WM_APP + 1
#define WM_APPUPDVALUES WM_APP + 2

#define ID_INIT   150
#define ID_TEXT   200
#define ID_STATICFS		300
#define ID_STATICOS		301
#define ID_STATICFR		302
#define ID_STATICFNS	303
#define ID_TEXTFS		304
#define ID_TEXTOS		305
#define ID_TEXTFR		306
#define ID_TEXTFNS		307

const LPSTR szfs = "Flame signal";
const LPSTR szos = "Outlet";
const LPSTR szfr = "Firing rate";
const LPSTR szfns = "Fan speed";

static unsigned char dlg_103[] = 
{
	0x01,0x00,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc8,0x00,0xc8,0x80,0x09,
	0x00,0x00,0x00,0x00,0x00,0x40,0x01,0xb4,0x00,0x00,0x00,0x00,0x00,0x41,0x00,0x62,
	0x00,0x6f,0x00,0x75,0x00,0x74,0x00,0x20,0x00,0x74,0x00,0x72,0x00,0x61,0x00,0x73,
	0x00,0x68,0x00,0x38,0x00,0x38,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x01,0x56,
	0x00,0x65,0x00,0x72,0x00,0x64,0x00,0x61,0x00,0x6e,0x00,0x61,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x02,0x50,0x0a,0x00,0x05,0x00,0x64,
	0x00,0x14,0x00,0x2c,0x01,0x00,0x00,0xff,0xff,0x82,0x00,0x46,0x00,0x6c,0x00,0x61,
	0x00,0x6d,0x00,0x65,0x00,0x20,0x00,0x73,0x00,0x69,0x00,0x67,0x00,0x6e,0x00,0x61,
	0x00,0x6c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x02,0x50,0x0a,0x00,0x2d,0x00,0x50,0x00,0x14,0x00,0x2d,0x01,0x00,0x00,0xff,
	0xff,0x82,0x00,0x4f,0x00,0x75,0x00,0x74,0x00,0x6c,0x00,0x65,0x00,0x74,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x02,0x50,0x0a,
	0x00,0x55,0x00,0x50,0x00,0x14,0x00,0x2e,0x01,0x00,0x00,0xff,0xff,0x82,0x00,0x46,
	0x00,0x69,0x00,0x72,0x00,0x69,0x00,0x6e,0x00,0x67,0x00,0x20,0x00,0x72,0x00,0x61,
	0x00,0x74,0x00,0x65,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x02,0x50,0x0a,0x00,0x7d,0x00,0x50,0x00,0x14,0x00,0x2f,
	0x01,0x00,0x00,0xff,0xff,0x82,0x00,0x46,0x00,0x61,0x00,0x6e,0x00,0x20,0x00,0x73,
	0x00,0x70,0x00,0x65,0x00,0x65,0x00,0x64,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x02,0x50,0x96,0x00,0x05,0x00,0x50,
	0x00,0x14,0x00,0x30,0x01,0x00,0x00,0xff,0xff,0x82,0x00,0x30,0x00,0x2e,0x00,0x30,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x02,0x50,0x96,0x00,0x2d,0x00,0xa0,0x00,0x14,0x00,0x31,0x01,0x00,0x00,0xff,
	0xff,0x82,0x00,0x30,0x00,0x2e,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x02,0x50,0x96,0x00,0x55,0x00,0x50,
	0x00,0x14,0x00,0x32,0x01,0x00,0x00,0xff,0xff,0x82,0x00,0x30,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x50,0x96,
	0x00,0x7d,0x00,0x50,0x00,0x14,0x00,0x33,0x01,0x00,0x00,0xff,0xff,0x82,0x00,0x30,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,
	0x00,0x03,0x50,0x0a,0x00,0x9b,0x00,0x50,0x00,0x14,0x00,0x01,0x00,0x00,0x00,0xff,
	0xff,0x80,0x00,0x4f,0x00,0x4b,0x00,0x00,0x00,0x00,0x00
};

// This class is exported from the Sola_Testing_DLL.dll
class SOLA_TESTING_DLL_API CSola_Testing_DLL {
public:
	typedef void (*callback_fn_ptr)(HWND h_ow);
	CSola_Testing_DLL(void);
	// TODO: add your methods here.
	CSola_Testing_DLL(HWND hOwner,callback_fn_ptr fp,HINSTANCE hInst,TCHAR* szTitle);
	~CSola_Testing_DLL(void);
	// TODO: add your methods here.
	BOOL Run();
/*	HGLOBAL Make_Dlg_Template(LPSTR lpszMessage);*/
	void Set_Parent_Callback(callback_fn_ptr fp);
	void Set_Values(uint16_t ui16_fs,uint16_t ui16_os,uint16_t ui16_fr,uint16_t ui16_fns);

private:
	static DWORD WINAPI DlgThreadProc(LPVOID lParam);
	static INT_PTR CALLBACK DlgProc(HWND hDlg,UINT message,WPARAM wParam,LPARAM lParam);
	HGLOBAL m_h_Dlg_Glbl;
	LPDLGTEMPLATE m_p_Dlg_Tmpl;
	LPDLGITEMTEMPLATE m_p_Dlg_Item_Tmpl;
	HWND m_hwndOwner;
	HANDLE m_hDlgQuitEvent;
	TCHAR* m_szDlgQuitEvent;
	TCHAR* m_szDlgRdyEvent;
	HWND m_hwndDlg;
	HANDLE m_hDlgRdyEvent;
	HANDLE m_hDlgThread;
	HANDLE m_hdupDlgThread;
	DWORD m_dwDlgThreadID;
	HINSTANCE m_hInst;
	TCHAR* m_szTitle;
	uint16_t m_ui16_fs;
	uint16_t m_ui16_os;
	uint16_t m_ui16_fr;
	uint16_t m_ui16_fns;
/*	LPWORD lpwAlign(LPWORD lpIn);*/
	callback_fn_ptr m_Parent_Callback_Fn;
	BOOL Stop();
};

